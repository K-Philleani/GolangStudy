# mysql 架构与历史

## mysql 逻辑架构

![mysql 服务器逻辑架构](https://cnymw.github.io/GolangStudy/docs/img/数据库-mysql基础-mysql服务器逻辑架构.png)

- 最上层服务：包含连接处理，授权认证，安全等
- 第二层架构：大多数 MySQL 核心服务功能在这一层，包括查询解析，分析，优化，缓存以及所有的内置函数，所有跨存储引擎的功能都在这层实现：存储过程，触发器，视图等。
- 第三层架构：存储引擎。

MySQL 由以下几部分组成：
- 连接池组件
- 管理服务和工具组件
- SQL 接口组件
- 查询分析器组件
- 优化器组件
- 缓冲（Cache）组件
- 插件式存储引擎
- 物理文件

### 连接管理

每个客户端连接都会在服务器进程中拥有一个线程，这个连接的查询只会在这个单独的线程中执行。

服务器会负责缓存线程，因此不需要为每一个新建的连接创建或者销毁线程。

MySQL 5.5 以上版本提供了一个 API，支持线程池插件，可以使用池中少量线程来服务大量的连接。

### 数据库和实例

- 数据库：物理操作系统文件或其他形式文件类型的集合。在 MySQL 中，数据库文件可能是 frm , MYD , ibd 结尾的文件。
- 实例：MySQL 数据库由后台线程以及一个共享内存区组成。共享内存可以被运行的后台线程所共享，数据库实例才是真正用于操作数据库文件的。MySQL 数据库实例在系统上的表现就是一个进程。


